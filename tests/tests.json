{
  "setups": {
    "baseline": {
      "comment": "Sets up baseline options for POST and configures validators for the post processors artifacts",
      "posts": ["laserpost-lightburn", "laserpost-svg"],
      "options": {
        "quiet": "--quiet",
        "nobackup": "--nobackup",
        "noeditor": "--noeditor",
        "nointeraction": "--nointeraction",
        "timeout": ["--timeout", "1"]
      },
      "validators": {
        "lbrn": {
          "post": "laserpost-lightburn",
          "file": "*.lbrn",
          "validator": "xpath"
        },
        "svg": {
          "post": "laserpost-svg",
          "file": "*.svg",
          "validator": "xpath",
          "namespaces": { "svg": "http://www.w3.org/2000/svg" }
        },
        "txt": {
          "post": "*",
          "file": "*.txt",
          "validator": "text",
          "regex": [
            {
              "regex": "^Generated at: .*$",
              "replace": "Generated at: [DATE-REMOVED]"
            }
          ]
        }
      },
      "properties": {
        "laserpost0500IncludeComments": "INCLUDE_COMMENTS_DEBUG",
        "includeTimestamp": "false"
      }
    },
    "barebones": {
      "comment": "Strips artifacts to bare minimum for testing of basic operation.",
      "setup": "baseline",
      "validators": {
        "lbrn": {
          "xpath": [
            { "query": "/LightBurnProject/@AppVersion", "required": true }
          ]
        },
        "svg": {
          "xpath": [{ "query": "/svg:svg/@version", "required": true }]
        }
      },
      "properties": {
        "laserpost0500IncludeComments": "INCLUDE_COMMENTS_DEBUG"
      }
    },
    "all": {
      "comment": "Maintains all relevant properties from artifacts.",
      "setup": "baseline",
      "validators": {
        "lbrn": {
          "xpath": [
            { "query": "/LightBurnProject/CutSetting", "required": true },
            { "query": "/LightBurnProject/Shape", "required": true }
          ]
        },
        "svg": {
          "xpath": [
            { "query": "/svg:svg/svg:g", "required": false },
            { "query": "/svg:svg/svg:path", "required": false }
          ]
        }
      }
    },
    "marker": {
      "comment": "Alignment Marker testing, snaps only the specific layer and shapes",
      "setup": "baseline",
      "validators": {
        "lbrn": {
          "xpath": [
            { "query": "/LightBurnProject/CutSetting[2]", "required": true },
            { "query": "/LightBurnProject/Shape[3]", "required": true }
          ]
        },
        "svg": {
          "xpath": [{ "query": "/svg:svg/svg:g[2]", "required": true }]
        }
      }
    }
  },
  "tests": [
    {
      "name": "Barebones",
      "comment": "Test for basic operation without much content validation",
      "setup": "barebones",
      "cnc": "op-1-defaults"
    },
    {
      "name": "Default properties",
      "comment": "Default properties on op-1-defaults file",
      "setup": "all",
      "cnc": "op-1-defaults"
    },
    {
      "name": "Marker upper-right",
      "comment": "Alignment marker set to upper-right",
      "setup": "marker",
      "cnc": "op-1-defaults",
      "properties": {
        "laserpost0300AlignmentMarks": "ALIGNMENT_MARK_UPPER_RIGHT"
      }
    },
    {
      "name": "Marker center-right",
      "comment": "Alignment marker set to center-right",
      "setup": "marker",
      "cnc": "op-1-defaults",
      "properties": {
        "laserpost0300AlignmentMarks": "ALIGNMENT_MARK_CENTER_RIGHT"
      }
    },
    {
      "name": "Marker lower-right",
      "comment": "Alignment marker set to lower-right",
      "setup": "marker",
      "cnc": "op-1-defaults",
      "properties": {
        "laserpost0300AlignmentMarks": "ALIGNMENT_MARK_LOWER_RIGHT"
      }
    },
    {
      "name": "Org op no group",
      "comment": "Organize by operation, without grouping",
      "setup": "all",
      "cnc": "op-4-cut-modes",
      "properties": {
        "laserpost0100Organization": "ORGANIZATION_BY_OPERATION",
        "laserpost0200GroupShapes": "false"
      }
    },
    {
      "name": "Org op group",
      "comment": "Organize by operation, with grouping",
      "setup": "all",
      "cnc": "op-4-cut-modes",
      "properties": {
        "laserpost0100Organization": "ORGANIZATION_BY_OPERATION",
        "laserpost0200GroupShapes": "true"
      }
    },
    {
      "name": "Org layer no group",
      "comment": "Oranize by layer without grouping",
      "setup": "all",
      "cnc": "op-4-cut-modes",
      "properties": {
        "laserpost0100Organization": "ORGANIZATION_BY_LAYER",
        "laserpost0200GroupShapes": "false"
      }
    },
    {
      "name": "Org layer group",
      "comment": "Organize by layer with grouping",
      "setup": "all",
      "cnc": "op-4-cut-modes",
      "properties": {
        "laserpost0100Organization": "ORGANIZATION_BY_LAYER",
        "laserpost0200GroupShapes": "true"
      }
    },
    {
      "name": "Org file layer no group",
      "comment": "Organize by layer file, without grouping",
      "setup": "all",
      "cnc": "op-4-cut-modes",
      "properties": {
        "laserpost0100Organization": "ORGANIZATION_BY_LAYER_FILE",
        "laserpost0200GroupShapes": "false"
      }
    },
    {
      "name": "Org file layer group",
      "comment": "Organize by layer file, with grouping - with alignment mark testing for each layer file",
      "setup": "all",
      "cnc": "op-4-cut-modes",
      "validators": {
        "lbrn": {
          "regex": [
            { "regex": "Operation: Alignment (mark)", "require": "mark" }
          ]
        },
        "svg": {
          "regex": [
            { "regex": "Operation: Alignment (mark)", "require": "mark" }
          ]
        }
      },
      "properties": {
        "laserpost0100Organization": "ORGANIZATION_BY_LAYER_FILE",
        "laserpost0300AlignmentMarks": "ALIGNMENT_MARK_UPPER_RIGHT",
        "laserpost0200GroupShapes": "true"
      }
    },
    {
      "name": "Orientation LL-LL",
      "comment": "Model complex-ll-top, verify not rotated and LBRN not dirty w/ll orientation",
      "setup": "all",
      "cnc": "complex-ll-top",
      "properties": { "machine0050Orientation": "MACHINE_ORIENTATION_LOWER_LEFT" }
    },
    {
      "name": "Orientation LL-UL",
      "comment": "Model complex-ll-top, verify not rotated and LBRN not dirty w/ul orientation",
      "setup": "all",
      "cnc": "complex-ll-top",
      "properties": { "machine0050Orientation": "MACHINE_ORIENTATION_UPPER_LEFT" }
    },
    {
      "name": "Orientation LL-LR",
      "comment": "Model complex-ll-top, verify not rotated and LBRN not dirty w/lr orientation",
      "setup": "all",
      "cnc": "complex-ll-top",
      "properties": { "machine0050Orientation": "MACHINE_ORIENTATION_LOWER_RIGHT" }
    },
    {
      "name": "Orientation LL-UR",
      "comment": "Model complex-ll-top, verify not rotated and LBRN not dirty w/ur orientation",
      "setup": "all",
      "cnc": "complex-ll-top",
      "properties": { "machine0050Orientation": "MACHINE_ORIENTATION_UPPER_RIGHT" }
    },
    {
      "name": "Orientation Right LL-LL",
      "comment": "Model complex-ll-right, verify not rotated and LBRN not dirty w/ur orientation",
      "setup": "all",
      "cnc": "complex-ll-right",
      "properties": { "machine0050Orientation": "MACHINE_ORIENTATION_UPPER_RIGHT" }
    }
  ],
  "to-do": [
    "laserpost0200GroupShapes:",
    "  VERIFY OUTPUT FILES",
    "  type: 'boolean',",
    "  value: GROUP_SHAPES_DEFAULT,",
    "laserpost0300AlignmentMarks:",
    "  NEED TO ROTATE BASED ON ORIENTATION; MAYBE MORE POSITION OPTIONS?",
    "    { title: localize('None'), id: ALIGNMENT_MARK_NONE },",
    "    { title: localize('Aligned to stock upper-right'), id: ALIGNMENT_MARK_UPPER_RIGHT },",
    "    { title: localize('Aligned to stock center-right'), id: ALIGNMENT_MARK_CENTER_RIGHT },",
    "    { title: localize('Aligned to stock lower-right'), id: ALIGNMENT_MARK_LOWER_RIGHT },",
    "laserpost0400IncludeNotes:",
    "    { title: localize('Disable'), id: INCLUDE_NOTES_NONE },",
    "    // #if LBRN",
    "    { title: localize('Hidden'), id: INCLUDE_NOTES_HIDDEN },",
    "    // #endif",
    "    {",
    "      title: localize('Show when important'),",
    "      id: INCLUDE_NOTES_SHOW_IMPORTANT,",
    "    },",
    "    { title: localize('Always show'), id: INCLUDE_NOTES_SHOW },",
    "laserpost0500IncludeComments:",
    "    { title: localize('Disable'), id: INCLUDE_COMMENTS_NONE },",
    "    { title: localize('Normal'), id: INCLUDE_COMMENTS_NORMAL },",
    "    { title: localize('Debug'), id: INCLUDE_COMMENTS_DEBUG },",
    "    { title: localize('Insane'), id: INCLUDE_COMMENTS_INSANE },",
    "",
    "",
    "work0100TraceStock:",
    "  type: 'boolean',",
    "  value: TRACE_STOCK_DEFAULT,",
    "work0200OffsetX:",
    "  type: 'number',",
    "  value: OFFSET_X_AXIS_DEFAULT,",
    "work0300OffsetY:",
    "  type: 'number',",
    "  value: OFFSET_Y_AXIS_DEFAULT,",
    "",
    "",
    "laserPower0100EtchMin:",
    "  type: 'number',",
    "  value: LASER_POWER_ETCH_MIN_DEFAULT,",
    "laserPower0200EtchMax:",
    "  type: 'number',",
    "  value: LASER_POWER_ETCH_MAX_DEFAULT,",
    "laserPower0300VaporizeMin:",
    "  type: 'number',",
    "  value: LASER_POWER_VAPORIZE_MIN_DEFAULT,",
    "laserPower0400VaporizeMax:",
    "  type: 'number',",
    "  value: LASER_POWER_VAPORIZE_MAX_DEFAULT,",
    "laserPower0500ThroughMin:",
    "  type: 'number',",
    "  value: LASER_POWER_THROUGH_MIN_DEFAULT,",
    "laserPower0600ThroughMax:",
    "  type: 'number',",
    "  value: LASER_POWER_THROUGH_MAX_DEFAULT,",
    "",
    "",
    "// #if LBRN",
    "machine0050Orientation:",
    "    { title: localize('Upper left'), id: MACHINE_ORIENTATION_UPPER_LEFT },",
    "    { title: localize('Upper right'), id: MACHINE_ORIENTATION_UPPER_RIGHT },",
    "    { title: localize('Lower left'), id: MACHINE_ORIENTATION_LOWER_LEFT },",
    "    { title: localize('Lower right'), id: MACHINE_ORIENTATION_LOWER_RIGHT },",
    "// #endif",
    "machine0100SpeedUnits:",
    "    { title: localize('mm/sec'), id: SPEED_UNITS_MMPS },",
    "    { title: localize('mm/min'), id: SPEED_UNITS_MMPM },",
    "machine0300AutomaticUpdate:",
    "    { title: localize('Never'), id: UPDATE_FREQUENCY_NEVER },",
    "    { title: localize('Always'), id: UPDATE_FREQUENCY_ALWAYS },",
    "    { title: localize('Hourly'), id: UPDATE_FREQUENCY_HOURLY },",
    "    { title: localize('Daily'), id: UPDATE_FREQUENCY_DAILY },",
    "    { title: localize('Weekly'), id: UPDATE_FREQUENCY_WEEKLY },",
    "    { title: localize('Monthly'), id: UPDATE_FREQUENCY_MONTHLY },",
    "machine0400UpdateAllowBeta:",
    "  type: 'boolean',",
    "  value: UPDATE_ALLOW_BETA_DEFAULT,",
    "// #if LBRN",
    "machine0500ShuttleLaser1:",
    "  type: 'string',",
    "  value: SHUTTLE_LASER_1_DEFAULT,",
    "machine0600ShuttleLaser2:",
    "  type: 'string',",
    "  value: SHUTTLE_LASER_2_DEFAULT,",
    "// #endif",
    "",
    "",
    "op0100LayerMode:",
    "    { title: localize('Use cutting mode'), id: LAYER_MODE_INHERIT },",
    "    { title: localize('Line'), id: LAYER_MODE_LINE },",
    "    { title: localize('Fill'), id: LAYER_MODE_FILL },",
    "    { title: localize('Offset Fill'), id: LAYER_MODE_OFFSET_FILL },",
    "op0200UseAir:",
    "    { title: localize('Off'), id: USE_AIR_OFF },",
    "    { title: localize('On'), id: USE_AIR_ON },",
    "    { title: localize('Use tool setting'), id: USE_AIR_ASSIST_GAS },",
    "op0300LaserEnable:",
    "    { title: localize('Use tool setting'), id: LASER_ENABLE_TOOL },",
    "    { title: localize('Disable output'), id: LASER_ENABLE_OFF },",
    "    { title: localize('Laser 1'), id: LASER_ENABLE_1 },",
    "    { title: localize('Laser 2'), id: LASER_ENABLE_2 },",
    "    { title: localize('Both lasers'), id: LASER_ENABLE_BOTH },",
    "op0400PowerScale:",
    "  type: 'number',",
    "  value: POWER_SCALE_DEFAULT,",
    "op0500ZOffset:",
    "  type: 'number',",
    "  value: Z_OFFSET_DEFAULT,",
    "op0600Passes:",
    "  type: 'number',",
    "  value: PASS_COUNT_DEFAULT,",
    "op0700ZStep:",
    "  type: 'number',",
    "  value: Z_STEP_PER_PASS_DEFAULT,",
    "op0800GroupName:",
    "  type: 'string',",
    "  value: GROUP_NAME_DEFAULT,",
    "// #if LBRN",
    "op0900CustomCutSettingXML:",
    "  type: 'string',",
    "  value: CUSTOM_CUT_SETTING_XML_DEFAULT,",
    "// #endif",
    ""
  ]
}
