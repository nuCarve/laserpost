{
  "setups": {
    "baseline": {
      "comment": "Sets up baseline options for POST and configures validators for the post processors artifacts",
      "posts": ["laserpost-lightburn", "laserpost-svg"],
      "options": {
        "quiet": "--quiet",
        "nobackup": "--nobackup",
        "noeditor": "--noeditor",
        "nointeraction": "--nointeraction",
        "timeout": ["--timeout", "1"]
      },
      "validators": {
        "lbrn": {
          "post": "laserpost-lightburn",
          "file": "*.lbrn",
          "validator": "xpath"
        },
        "svg": {
          "post": "laserpost-svg",
          "file": "*.svg",
          "validator": "xpath",
          "namespaces": { "svg": "http://www.w3.org/2000/svg" }
        },
        "txt": {
          "post": "*",
          "file": "*.txt",
          "validator": "text",
          "regex": [
            {
              "regex": "^Generated at: .*$",
              "replace": "Generated at: [DATE-REMOVED]"
            }
          ]
        }
      },
      "properties": {
        "laserpost0500IncludeComments": "INCLUDE_COMMENTS_DEBUG"
      }
    },
    "barebones": {
      "comment": "Strips artifacts to bare minimum for testing of basic operation.",
      "setup": "baseline",
      "validators": {
        "lbrn": {
          "xpath": [
            { "query": "/LightBurnProject/@AppVersion", "required": true }
          ]
        },
        "svg": {
          "xpath": [{ "query": "/svg:svg/@version", "required": true }]
        },
        "txt": {
          "regex": [
            {
              "comment": "Clear out everything except the 'generated at' comment",
              "regex": "[\\s\\S]+^(Generated at: .*)$[\\s\\S]+",
              "replace": "Generated at: [DATE-REMOVED]"
            },
            {
              "regex": "^Generated at: (.*)$",
              "require": "[DATE-REMOVED]"
            }
          ]
        }
      },
      "properties": {
        "laserpost0500IncludeComments": "INCLUDE_COMMENTS_DEBUG"
      }
    },
    "all": {
      "comment": "Maintains all relevant properties from artifacts.",
      "setup": "baseline",
      "validators": {
        "lbrn": {
          "xpath": [
            { "query": "/LightBurnProject/CutSetting", "required": true },
            { "query": "/LightBurnProject/Shape", "required": true }
          ]
        },
        "svg": {
          "xpath": [
            { "query": "/svg:svg/svg:g", "required": true },
            { "query": "/svg:svg/svg:path", "required": false }
          ]
        }
      }
    }
  },
  "tests": [
    {
      "name": "Barebones",
      "comment": "Test for basic operation without much content validation",
      "setup": "barebones",
      "cnc": "cover-mm"
    },
    {
      "name": "Default properties",
      "comment": "Default properties on cover-mm file",
      "setup": "all",
      "cnc": "cover-mm"
    },
    {
      "name": "Marker TR",
      "comment": "Alignment marker set to top-right",
      "setup": "all",
      "cnc": "cover-mm",
      "properties": {
        "laserpost0300AlignmentMarks": "ALIGNMENT_MARK_TOP_RIGHT"
      }
    }
  ]
}
